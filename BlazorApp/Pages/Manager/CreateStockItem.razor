@inject IStockDataService stockData
@inject NavigationManager NavigationManager
@inject IManagerSessionData managerSession

<h3>Add Item</h3>

	<div class="col-md-12">
		<EditForm Model="@stockItem" OnValidSubmit="HandleValidSubmit">
			<DataAnnotationsValidator />
			<ValidationSummary />

			<div class="mb-3">
				<label>Item Name:</label>
				<InputText @bind-Value="stockItem.ItemName" class="form-control" />
			</div>
			<div class="mb-3">
				<label>Quantity:</label>
				<InputNumber @bind-Value="stockItem.Quantity" class="form-control" />
			</div>
			<div class="mb-3">
				<label>Unit:</label>
				<InputText @bind-Value="stockItem.Unit" class="form-control" />
			</div>
			<div class="mb-3">
				<label>Minimum Quantity Alarm:</label>
				<InputNumber @bind-Value="stockItem.AlarmMinimum" class="form-control" />
			</div>
			<button class="btn btn-primary" type="submit">Create Stock Item</button>
		</EditForm>
	</div>



@code {
	private IStockItemModel stockItem = new UIStockItemModel();

	private async Task HandleValidSubmit()
	{
		await stockData.CreateStockItem(stockItem);

		stockItem = new UIStockItemModel();

		managerSession.SetLastPage(NavigationManager.Uri.ToString());

		NavigationManager.NavigateTo("/Inventory");
	}
}
