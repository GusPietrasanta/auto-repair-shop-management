@using DataAccessLibrary.Data.Interfaces
@inject IStatisticsDataService StatisticsData

<SfChart Title="Most Common 'Requires Immediate Action' Items">
	<ChartTitleStyle Size="23px" FontFamily="Arial" FontWeight="regular" FontStyle=""></ChartTitleStyle>
	<ChartPrimaryXAxis Title="Item" ValueType="Syncfusion.Blazor.Charts.ValueType.Category" LabelIntersectAction="LabelIntersectAction.Rotate45">
		<ChartAxisLabelStyle Size="16px" FontFamily="Arial"></ChartAxisLabelStyle>
		<ChartAxisTitleStyle Size="16px" FontFamily="Arial" FontWeight="bold" />
	</ChartPrimaryXAxis>
	<ChartPrimaryYAxis Title="Occurrences">
		<ChartAxisTitleStyle Size="16px" FontFamily="Arial" FontWeight="bold" />
	</ChartPrimaryYAxis>

	<ChartSeriesCollection>
		<ChartSeries DataSource="@_items" XName="Item" YName="Occurrences" Type="ChartSeriesType.Column">
			<ChartMarker>
				<ChartDataLabel Visible="false"></ChartDataLabel>
			</ChartMarker>
		</ChartSeries>
	</ChartSeriesCollection>
</SfChart>


@code {

	private List<IImmediateAttentionDataModel> _items;


	protected override async Task OnInitializedAsync()
	{
		_items = await StatisticsData.GetImmediateAttentionStatistics();
	}
}